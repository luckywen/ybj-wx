(function(d,c,a,f){var b=a.all&&!c.atob;c.IUI_UTILS={animateEnd:"webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",transitionEnd:"webkitTransitionEnd transitionend oTransitionEnd MSTransitionEnd msTransitionEnd",isPlaceholder:function(){var g=a.createElement("input");return"placeholder" in g},throttle:function(h,j,n){var g,l,o;var m=null;var k=0;if(!n){n={}}var i=function(){k=n.leading===false?0:new Date().getTime();m=null;o=h.apply(g,l);if(!m){g=l=null}};return function(){var p=new Date().getTime();if(!k&&n.leading===false){k=p}var q=j-(p-k);g=this;l=arguments;if(q<=0||q>j){clearTimeout(m);m=null;k=p;o=h.apply(g,l);if(!m){g=l=null}}else{if(!m&&n.trailing!==false){m=setTimeout(i,q)}}return o}},debounce:function(i,k,h){var n,m,g,l,o;var j=function(){var p=new Date().getTime()-l;if(p<k&&p>0){n=setTimeout(j,k-p)}else{n=null;if(!h){o=i.apply(g,m);if(!n){g=m=null}}}};return function(){g=this;m=arguments;l=new Date().getTime();var p=h&&!n;if(!n){n=setTimeout(j,k)}if(p){o=i.apply(g,m);g=m=null}return o}},scrollBarWidth:(function(){var h;var g=d("<div/>");g.css({width:100,height:100,overflow:"scroll",position:"absolute",top:-9999});d("html").append(g);h=g[0].offsetWidth-g[0].clientWidth;g.remove();return h}()),animateEndShim:function(i,h,g){if(b||g){h()}else{i.on(IUI_UTILS.animateEnd,h)}},transitionEndShim:function(i,h,g){if(b||g){h()}else{i.on(IUI_UTILS.transitionEnd,h)}}};c.IUI={};d.fn.IUI=function(){var g=arguments;var i=arguments[0];if(IUI[i]){i=IUI[i];g=Array.prototype.slice.call(g,1);return i.apply(this,g)}else{if(typeof(i)=="object"||!i){for(var h in i){IUI=d.extend(IUI,i);i=IUI[h];break}}else{d.error("Method "+i+" does not exist on jQuery.IUI Plugin");return this}}};var e=d({});d.extend({sub:function(){e.on.apply(e,arguments)},unsub:function(){e.off.apply(e,arguments)},pub:function(){e.trigger.apply(e,arguments)}});d.extend({alert:function(s){var h=d.extend({container:"body",obj:"#message",text:"",timeout:1000,status:true,offset:false,customClass:"alert-part",callback:null},s);var r=h.obj.charAt(0)==="#"?"id":"class";var j=d(h.obj).length===0?d("<div "+r+'="'+h.obj.slice(1)+'" />').appendTo("body"):d(h.obj);var i=h.status?"success":"error";var k=j.data("count")||1;var g=new Date().getTime();var o=j.outerWidth();var q=j.outerHeight();var n=j.offset().left;var m=j.offset().top;var p;clearTimeout(j.data("count"));if(h.offset){if(typeof j.attr("data-alert")==="undefined"){d('<div class="'+h.customClass+'" id="alert_'+g+'" style="left:'+(n+h.offset[0])+"px;top:"+(m+q+h.offset[1])+'px"></div>').appendTo(h.container);j.attr("data-alert",g)}p=d("#alert_"+j.attr("data-alert"))}var l=h.offset?p:j;l.html('<span class="'+i+'">'+h.text+"</span>").removeClass("hide");j.data("count",setTimeout(function(){l.addClass("hide");if(h.callback){h.callback()}},h.timeout))}});
/*!
     * JavaScript Cookie v2.1.2
     * https://github.com/js-cookie/js-cookie
     *
     * Copyright 2006, 2015 Klaus Hartl & Fagner Brack
     * Released under the MIT license
     */
(function(g){function i(){var m=0;var j={};for(;m<arguments.length;m++){var k=arguments[m];for(var l in k){j[l]=k[l]}}return j}function h(k){function j(t,s,p){var w;if(typeof a==="undefined"){return}if(arguments.length>1){p=i({path:"/"},j.defaults,p);if(typeof p.expires==="number"){var n=new Date();n.setMilliseconds(n.getMilliseconds()+p.expires*86400000);p.expires=n}try{w=JSON.stringify(s);if(/^[\{\[]/.test(w)){s=w}}catch(r){}if(!k.write){s=encodeURIComponent(String(s)).replace(/%(23|24|26|2B|3A|3C|3E|3D|2F|3F|40|5B|5D|5E|60|7B|7D|7C)/g,decodeURIComponent)}else{s=k.write(s,t)}t=encodeURIComponent(String(t));t=t.replace(/%(23|24|26|2B|5E|60|7C)/g,decodeURIComponent);t=t.replace(/[\(\)]/g,escape);return(a.cookie=[t,"=",s,p.expires&&"; expires="+p.expires.toUTCString(),p.path&&"; path="+p.path,p.domain&&"; domain="+p.domain,p.secure?"; secure":""].join(""))}if(!t){w={}}var v=a.cookie?a.cookie.split("; "):[];var u=/(%[0-9A-Z]{2})+/g;var q=0;for(;q<v.length;q++){var o=v[q].split("=");var m=o.slice(1).join("=");if(m.charAt(0)==='"'){m=m.slice(1,-1)}try{var l=o[0].replace(u,decodeURIComponent);m=k.read?k.read(m,l):k(m,l)||m.replace(u,decodeURIComponent);if(this.json){try{m=JSON.parse(m)}catch(r){}}if(t===l){w=m;break}if(!t){w[l]=m}}catch(r){}}return w}j.set=j;j.get=function(l){return j(l)};j.getJSON=function(){return j.apply({json:true},[].slice.call(arguments))};j.defaults={};j.remove=function(m,l){j(m,"",i(l,{expires:-1}))};j.withConverter=h;return j}g.extend({cookie:h(function(){})})}(jQuery));d.loading=d.fn.loading=function(o,i,n){var g={display:false,type:1,animateHtml:'<div class="ball-clip-rotate"><div></div></div>',src:"http://img.yi114.com/201571121314_382.gif",shadow:true,template:'<div class="IUI-loading">{{hook}}</div>'};var k=this instanceof d;var h=k?this:d("body");if(k){h.css("position","relative")}var j=typeof o==="object";if(!n){d.extend(g,j?o:d.loadingConfig)}if(!j&&typeof o!==void 0){g.display=o}if(i!==f){g.type=i}var m=g.template;m=m.replace("{{hook}}",g.type?g.animateHtml:'<img src="'+g.src+'" />');if(g.shadow){m='<div class="IUI-loading-backdrop" '+(k?'style="position:absolute;"':"")+"></div>"+m}var l=h.data("loading")||d(m);if(!h.data("loading")){h.data("loading",l)}if(g.display){h.append(l)}else{h.data("loading").remove()}};(function(l,i){var g="3.1.0";var k=IUI_UTILS.scrollBarWidth;var j=l("body");var h=l('<div class="layer-backdrop"></div>');function m(o,n){var p={container:"body",cache:false,shadow:true,confirmHandle:".btn-confirm",closeHandle:".btn-cancel,.btn-close",offsetWidth:"auto",offsetHeight:"auto",url:l(this).attr("data-url")||false,dataType:l(this).attr("data-dataType")||"html",data:"",method:"GET",content:"",animateDisable:false,zIndex:0,showCall:function(){},hideCall:function(){},successCall:function(){},errorCall:function(){},confirmCall:function(){},cancelCall:function(){}};this.$selector=n;this.config=l.extend(p,o);this.$backdrop=l('<div class="layer-backdrop"></div>');this.init();this.event()}m.prototype.init=function(){var v=this;var q=v.config;var s='<div class="layer-box hide" id="{{layerName}}"><div class="layer-content">'+q.content+"</div></div>";var t=this.$selector=v.$selector.length?v.$selector:l(s.replace("{{layerName}}",v.$selector.selector.replace("#",""))).appendTo(q.container);var u=q.container==="body"?j:l(q.container);var p=q.closeHandle;var n=this.$content=t.find(".layer-content");var o=Number(t.attr("data-width"))||q.offsetWidth;var r=Number(t.attr("data-height"))||q.offsetHeight;if(q.zIndex){v.$backdrop.css("z-index",q.zIndex);t.css("z-index",q.zIndex+10)}n.css({width:o,height:r});t.data("layer",v)};m.prototype.ajaxLoad=function(){var o=this;var p=o.config;var r=o.$selector;var q=p.url||"?";var s=(r.attr("data-method")||p.method).toUpperCase();var n=p.dataType;if(p.cache&&r.data("success")){o.showLayer();return false}l.loading(true,true);r.data("success",1);l.ajax({url:q,type:s,dataType:n,data:p.data}).then(function(t){l.loading(false);p.successCall.apply(r,[t,this,o]);o.showLayer()},function(t){l.loading(false);o.hideLayer();p.errorCall.apply(r,[t,this,o])});return o};m.prototype.event=function(){var n=this;var o=n.config;var p=n.$selector;p.on("click.iui-layer",o.confirmHandle,function(q){q.preventDefault();o.confirmCall.apply(p,[q,n]);return false});p.on("click.iui-layer",function(q){if(l(q.target).is(p)){if(!o.shadow){return false}if(j.find(".layer-loading").length){return false}n.hideLayer();o.cancelCall.apply(p,[q,n])}});p.on("click.iui-layer",o.closeHandle,function(q){n.hideLayer();o.cancelCall.apply(p,[q,n]);return false})};m.prototype.showLayer=function(t){var v=this;var n=v.config;var r=v.$backdrop;var p=l("body");var u=a.documentElement.clientHeight;var o=a.body.style.msTouchAction===f;var s=t;var q=l.Deferred();if(p.height()>u&(o)){p.data("initstyle",p.attr("style")||"");p.css({"border-right":k+"px transparent solid",overflow:"hidden"})}v.$selector.removeClass("hide");v.$content.off(IUI_UTILS.animateEnd);if(s){v.$content.removeClass("layer-opening")}else{v.$selector.after(r);r.attr("style","opacity: 1;visibility: visible;")}v.$content.addClass("layer-opening");IUI_UTILS.animateEndShim(v.$content,function(w){v.$content.removeClass("layer-opening");v.$selector.trigger("layer.show",[v]);n.showCall.apply(v.$selector,[v]);q.resolve()},n.animateDisable);l(a).on("keyup.iui-layer",function(w){if(w.keyCode===27){v.$selector.trigger("click.iui-layer",n.closeHandle)}});return q};m.prototype.hideLayer=function(r){var o=this;var p=o.config;var n=r;var q=l.Deferred();o.$content.off(IUI_UTILS.animateEnd);o.$content.addClass("layer-closing");if(!n){o.$backdrop.removeAttr("style");IUI_UTILS.transitionEndShim(o.$backdrop,function(){o.$backdrop.remove()},p.animateDisable)}IUI_UTILS.animateEndShim(o.$content,function(s){o.$content.removeClass("layer-closing");o.$selector.addClass("hide");o.$selector.trigger("layer.hide",[this]);p.hideCall.apply(o.$selector,[o]);q.resolve()},p.animateDisable);j.attr("style",j.data("initstyle"));l(a).off("keyup.iui-layer");return q};m.prototype.cutTo=function(q,n){var o=l(q).data("layer");var p=(n?l(n):this.$selector).data("layer");if(o.$backdrop.width()===0){o.$backdrop=p.$backdrop}p.hideLayer(true).done(function(){o.showLayer(true)})};m.prototype.destroy=function(){var n=this;var o=n.$selector;o.remove()};l.fn.IUI({layer:function(n){return new m(n,this)}})}(jQuery,c));(function(h){function g(k,j){var i=k;i.addClass("active "+j.animateBefore);setTimeout(function(){i.addClass(j.animateAfter)},100)}h.fn.IUI({tabs:function(i){return this.each(function(){var k={event:"click",animateBefore:"fade",animateAfter:"in",isCache:true,ajaxSetup:null};var l=h(this);var m=l.find(".tabs-item");var j=h.extend({},k,i);l.on(j.event+".iui-tabs",".tabs-item",function(o){o.preventDefault();var q=h(this);var p=q.parent();var n=h(q.attr("href"));n.trigger("tabsAjaxBefore",[j]);p.addClass("active").siblings(".active").removeClass("active");n.siblings(".tabs-content").removeClass("active "+j.animateBefore+" "+j.animateAfter);g(n,j);if(q.data("loaded")&&j.isCache){return false}if(q.data("ajax")){h.ajax(h.extend({url:q.data("ajax"),type:"GET",dataType:"html"},j.ajaxSetup)).then(function(r){q.data("loaded",true);n.trigger("tabsAjaxSuccess",[r])},function(r){console.log(r)})}g(n,j)})})}})}(jQuery));d.extend({share:function(p){var i=d.extend({title:null,summary:null,url:null,pic:d("body").find("img").eq(0).attr("src"),copybtn:"#copy-url",swbbtn:".sweibo",qzonebtn:".qzone",twbbtn:".tweibo",dbbtn:".douban",rrbtn:".renren"},p);var n=encodeURIComponent(i.title);var m=encodeURIComponent(i.summary);var j=encodeURIComponent(a.domain+i.pic);var h=encodeURIComponent(i.url+"&share=weibo");h="http://service.weibo.com/share/share.php?url="+h+"&title="+n+"&pic="+j+"&appkey=&searchPic=false";d(i.swbbtn).attr("href",h);var g=encodeURIComponent(i.url+"&share=qzone");g="http://sns.qzone.qq.com/cgi-bin/qzshare/cgi_qzshare_onekey?url="+g+"#qzone&title="+n+"&summary="+m+"&pics="+j;d(i.qzonebtn).attr("href",g);var k=encodeURIComponent(i.url+"&share=tweibo");k="http://share.v.t.qq.com/index.php?c=share&a=index&url="+k+"#tweibo&appkey=appkey&title="+m+"&pic="+j;d(i.twbbtn).attr("href",k);var o=encodeURIComponent(i.url+"&share=douban");o="http://www.douban.com/share/service?image="+j+"&href="+o+"#douban&name="+n+"&text="+m;d(i.dbbtn).attr("href",o);var l=encodeURIComponent(i.url+"&share=renren");l="http://widget.renren.com/dialog/share?resourceUrl="+l+"&srcUrl="+l+"&title="+n+"&pic="+j+"&description="+m;d(i.rrbtn).attr("href",l);d(i.copybtn).val(i.url+"&share=copy")}});d.extend({exist:function(o){var j=d.extend({obj:d("body"),parents:".form-container",type:"email",success:null},o);var m=j.obj instanceof d?j.obj:d(j.obj);var k=m.find("#"+j.type).parents(j.parents);var h=m.find('input[name="activityId"]').val();var l=m.find("#"+j.type).val();var g=d('meta[name="csrf-param"]').prop("content");var i=d('meta[name="csrf-token"]').prop("content");var n=l?"&email="+l:"";d.post("/index/init-activity",g+"="+i+"&activityId="+h+n,function(p){if(p.status){if(l){if(p.register){k.find("#"+j.type).val("");k.removeClass("none")}else{k.addClass("none")}}if(j.success){j.success(p.region)}}})}});d.extend({ajaxError:function(h){var k=this;var j=[];var m=d.extend({obj:"#message",data:null,timeout:3000,status:false,hideCall:function(){}},h);var i=m.obj instanceof d?m.obj:d(m.obj);var g=m.status?"success":"error";var l="";if(m.data.error.constructor!==Object){if(m.data.info!=="新增成功"||m.data.info!=="修改成功"){l=m.data.info;d.alert({obj:i,text:l,timeout:m.timeout,status:m.status})}return false}d.each(k.find(".val-error"),function(n,r){var q=d(r).attr("name");var o=d(r).attr("data-name");var p=o?o:q;j.push(p)});if(j){d.each(j,function(n,o){d.each(m.data.error,function(p,q){if(o===p){l=q;return l}});if(l){d.alert({obj:i,text:l,timeout:m.timeout,status:m.status,callback:m.hideCall});return false}})}}});d.fn.IUI({ajaxForm:function(g){return this.each(function(){var j=d(this);var i={url:j.attr("action"),method:j.attr("method")||"POST",type:j.attr("data-type")||"json",timeout:3000,data:null,ajax2:false,before:function(){},success:function(){},error:function(){},pending:function(){},always:function(){}};var h=d.extend({},i,g);j.data("deferred",h);j.on("submit",function(l){l.preventDefault();if(j.hasClass("disabled")){h.pending.call(j,h);return false}var m=h.before.call(j,l,h);var k={url:h.url,type:h.method,data:h.data||j.serialize(),timeout:h.timeout};if(h.ajax2){k.data=new FormData(j[0]);k.cache=false;k.contentType=false;k.processData=false}if(m===false){return false}j.addClass("disabled").prop("disabled",true);d.ajax(k).then(function(n){j.removeClass("disabled").prop("disabled",false);h.success.call(j,n,h)},function(n){j.removeClass("disabled").prop("disabled",false);h.error.call(j,n,h)}).always(function(n){h.always.call(j,n,h)})})})}});d.fn.IUI({validate:function(o){var m={isNonEmpty:function(r){var p=this.self;var q=p[0].value;if(d.trim(q).length===0){return false}},minLength:function(p){if(this.self[0].value.length<p.minLength){return false}},maxLength:function(p){if(this.self[0].value.length>p.maxLength){return false}},birthdayRange:function(s){var r=this.self[0].value;var q=s.range[0];var p=s.range[1];if(r<q||r>p){return false}},isBirthday:function(p){if(!/^[1-9]\d{3}([-|\/|\.])?((0\d)|([1-9])|(1[0-2]))\1(([0|1|2]\d)|([1-9])|3[0-1])$/.test(this.self[0].value)){return false}},isMobile:function(p){if(!/^1[3|4|5|6|7|8][0-9]\d{8}$/.test(this.self[0].value)){return false}},isEmail:function(p){if(!/(^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$)/.test(this.self[0].value)){return false}},between:function(t){var q=this.self;var s=this.self[0].value.length;var r=t.range[0];var p=t.range[1];if(s<r||s>p){return false}},onlyEn:function(p){if(!/^[A-Za-z]+$/.test(this.self[0].value)){return false}},onlyZh:function(p){if(!/^[\u4e00-\u9fa5]+$/.test(this.self[0].value)){return false}},notInt:function(p){if(/^[0-9]*$/.test(this.self[0].value)){return false}},onlyNum:function(p){if(!/^[0-9]+([.][0-9]+){0,1}$/.test(this.self[0].value)){return false}},onlyInt:function(p){if(!/^[0-9]*$/.test(this.self[0].value)){return false}},isChecked:function(q){var p=void (0);this.self.each(function(r,s){p=s.checked;return p?false:true});return p?void (0):false},isNickname:function(p){if(!/^[A-Za-z0-9_\-\u4e00-\u9fa5]{2,20}$/i.test(this.self[0].value)){return false}}};var h={globalMessage:false,errorClass:".validate-error",infoClass:".validate-info",successClass:".validate-success",collections:[],strategy:m};var g=this;function i(p){this.container="body";this.options=d.extend(true,{},h,p);this.$selector=g;this.cache={};this.errors={};this.init()}i.prototype.init=function(){var p=this;var q=["info","success","error"];if(p.options.collections.length===0){return false}p.add();d.each(p.cache,function(t,r){if(r.context.length===0){return}var u=/validate-context-(info|success|error)/.exec(r.context[0].className);var s;if(u){s=u[1];r.self.data("validateStatus",d.inArray(s,q))}})};i.prototype.mapping=function(r){var p=this.$selector.find("[data-required="+r.required+"]");var q=p.parents(r.context).eq(0);var s;if(q.length===0){s="{context:"+r.context+"} is invalid , it may prevent the triggering event";if(c.console){console.warn(s)}else{throw s}}if(this.cache[r.required]){return false}d.extend(true,this.cache,(function(){var t={};var u=t[r.required]={};u.matches={};u.self=p;u.context=q;u.infoMsg=r.infoMsg||"";u.options=r;d.extend(true,u.matches,r.matches);return t}()))};i.prototype.remove=function(w){var z=this;var A=z.options;var q=z.cache;var u,t=0,v,r,p,x,y,s;if(typeof w!=="string"){return false}u=w.split(" ");v=u.length;for(r in q){p=q[r].self;x=p.data("required");y=p[0]?p[0].type:"";s=z.$selector.find("[data-required="+x+"]");if(d.inArray(x,u)!==-1){if(d.inArray(y,["checkbox","file","radio"])!==-1){s.off("change.iui-validate")}else{s.off("focus.iui-validate blur.iui-validate")}s.data("event.iui-validate",false);delete q[r]}}z.bindEvent()};i.prototype.add=function(q){var p=this;var s=q||p.options.collections;for(var r=0;r<s.length;r++){var t=p.$selector.find('[data-required="'+s[r].required+'"]');var u='iui-validate:cannot find element by data-required="'+s[r].required+'"';if(t.length){p.mapping(s[r])}else{if(c.console){console.warn(u)}else{throw u}}}if(q){d.merge(p.options.collections,q)}p.bindEvent()};i.prototype.bindEvent=function(){var p=this;var q=n.call(this);var s=p.$selector;var r=["select-one","select-multiple","radio","checkbox","file"];d.each(q,function(u,x){var t=s.find(x);var v,w;if(t[0]===void 0){return}v=t[0].type;w=x.replace("[","").replace("]","").split("=")[1];if(t.data("event.iui-validate")){return}if(d.inArray(v,r)!==-1){t.on("change.iui-validate",{self:p},l);t.data("event.iui-validate",true);return}t.on("focus.iui-validate",{self:p},k);if(p.cache[w].options.unblur!==true){t.on("blur.iui-validate",{self:p},j)}t.data("event.iui-validate",true)})};i.prototype.verify=function(u,q){var t=d(this);var r=u.cache[t.data("required")];var s=r.matches;var p=false;d.each(s,function(w,x){var v=u.options.strategy[w].call(r,x);p=v===void (0)?1:2;t.data("validateStatus",p);u.message(p,r,w);return p===2?false:true});t.trigger("validate."+q,r);return p};i.prototype.message=function(t,p,w){var v,u,s,q,r,x=this.errors;if(t===0){v=this.options.infoClass;s=p.infoMsg}else{if(t===1){v=this.options.successClass;s=""}else{if(t===2){v=this.options.errorClass;s=p.matches[w].errMsg}else{}}}if(t===2){x[p.options.required]=s}if(!this.options.errorClass){return false}u=["info","success","error"];r=this.options.globalMessage?d(this.options.globalMessage):p.context;v=v.replace(/\./g," ").slice(1);r.removeClass("validate-context-info validate-context-success validate-context-error").addClass("validate-context-"+u[t]).find(".validate-message").remove();q=d('<div class="validate-message '+v+'" >'+s+"</div>");r.append(q)};i.prototype.batch=function(r){var q=this;var p=[];d.each(this.cache,function(u,v){if(v.self[0].disabled){return}var t=v.self.data("validateStatus");var s=q.verify.call(v.self,q,"batch");if(r&&s===2){p.push(s);return false}p.push(s)});return d.inArray(2,p)===-1?true:false};function n(){var p=[];var r=this.cache;for(var q in r){p.push("[data-required="+q+"]")}return p}function k(s){var q=s.data.self;var t=d(this);var p=t.data("required");var r=q.cache[p];if(q.options.infoClass){q.message(0,r)}t.trigger("validate.focus",r)}function j(s){var u=d(this);var p=s.data.self;var t=u.data("required");var r=p.cache[t];var q=r.options.delay;var v=this;if(q){clearTimeout(u.data("delay"));u.data("delay",setTimeout(function(){p.verify.call(v,p,"blur")},q));return false}p.verify.call(this,p,"blur")}function l(q){var p=q.data.self;p.verify.call(this,p,"change")}return new i(o)}});d.fn.IUI({emailSuffix:function(g){return this.each(function(){var k={container:"body",style:"global",item:"email-item",current:"checked",emails:["163.com","126.com","qq.com","gmail.com","sina.com","139.com","189.com","sohu.com"],delay:300,offsetLeft:d(this).offset().left,offsetTop:d(this).offset().top,offsetWidth:d(this).outerWidth(),offsetHeight:d(this).outerHeight(),checkedCall:function(){}};var p=d(this);var i=d.extend({},k,g);var m=d('<ul class="email-list hide"></ul>');var l=d(i.container);var j=null;var n=function(q,r){var w="";var v=r.value||null;var t=v?v.split("@")[0]:false;var u=v?v.split("@")[1]:false;for(var s=0;s<q.length;s++){email=q[s];if((t&&!u)||u&&email.indexOf(u)!==-1){w+='<li class="'+i.item+'" data-value="'+t+"@"+email+'">'+t+"@"+email+"</li>"}}return w};var o=function(x,w,v){var t=[38,40];if(d.inArray(x,t)===-1||w.hasClass("hide")){return false}var u=d.inArray(x,t)>=1?true:false;var r=w;var q=r.find("li").length;var s=r.find("li.checked");r.find("li").removeClass("checked");if(u){if(s.length&&s.index()!==q-1){s.next().addClass("checked")}else{r.find("li").eq(0).addClass("checked")}}else{if(s.index()>0){s.prev().addClass("checked")}else{r.find("li").eq(q-1).addClass("checked")}}v.val(d.trim(r.find("li.checked").text()));i.checkedCall.apply(p,[event,i])};var h=function(){var s=i.offsetLeft;var r=i.offsetTop;var q=i.offsetWidth;m.css({left:s,top:r+i.offsetHeight,width:q})};h();if(i.style==="global"){l.append(m);d(c).on("resize.emailSuffix",h)}else{p.parent().css("position","relative").append(m)}p.on("keyup.emailSuffix",function(q){var s=this.value;if(s.charAt(0)!=="@"&&s.split("@").length===2&&d.inArray(q.keyCode,[40,38,13])===-1){var r=n(i.emails,this);m.html(r).removeClass("hide").find("li").eq(0).addClass("checked")}else{if(d.inArray(q.keyCode,[40,38,13])===-1){m.html("").addClass("hide")}}});p.on("keydown.emailSuffix",function(r){var q=m.find("li.checked");o(r.keyCode,m,p);if(r.keyCode===13){r.preventDefault();if(q.length){p.val(d.trim(q.text()))}m.addClass("hide")}});p.on("blur.emailSuffix",function(q){j=setTimeout(function(){m.addClass("hide")},i.delay)});m.on("click","."+i.item,function(q){q.preventDefault();clearTimeout(j);p.val(d(this).attr("data-value")).focus();m.addClass("hide");i.checkedCall.apply(p,[q,i]);return false})})}});d.fn.IUI({placeholder:function(g){if("placeholder" in a.createElement("input")){return}var i={color:"#999",zIndex:1,top:0,left:0},j=d.extend({},i,g||{}),h=d(this).find('input[type="text"],input[type="password"],input[type="tel"],input[type="email"]');return h.each(function(l,q){var p=d(q),m=q,o=p.attr("placeholder");var k=d("<label></label>").css({position:"absolute",top:j.top,left:j.left,color:j.color,zIndex:j.zIndex,height:0,lineHeight:p.css("height"),fontSize:p.css("fontSize"),paddingLeft:p.css("textIndent")?p.css("textIndent"):p.css("paddingLeft"),background:"none",cursor:"text"}).text(o).insertBefore(p);p.parent().css({position:"relative"});if(p.val()){k.hide()}k.on({click:function(){k.hide();p.focus()}});p.on({focus:function(){k.hide()},blur:function(){if(!p.val()){k.show()}},input:function(){if(p.val()){k.hide()}else{k.show()}}});m.onpropertychange=function(n){n=n||c.event;if(n.propertyName==="value"){var r=d(this);if(r.val()){d(this).prev("label").hide()}else{d(this).prev("label").show()}}}})}});d.fn.IUI({typeCount:function(g){return this.each(function(){var i=d(this);var h=d.extend({separator:"/"},g);i.on("keyup","input[type=text],textarea",function(m){var n=d(this);var j=n.parent().find("span.count");var k=parseInt(j.text().split(h.separator)[1]);var l=this.value.length;if(l>k){j.addClass("error")}else{j.removeClass("error")}j.html(l+h.separator+k)});i.on("input propertychange","input[type=text],textarea",function(j){d(this).trigger("keyup")});i.find("input,textarea").trigger("keyup")})}});(function(j){var i={readOnly:false,contain:".tokenize",remove:"",maxLength:20,placeholder:"",expand:true,overLimitCount:function(){},existToken:function(){},searchCallback:function(){},beforeChoice:function(){},choiceCallback:function(){},removeCallback:function(){}};var g={top:38,right:39,bottom:40,left:37,enter:13,back:9};var l={spanTemplate:['<span class="token-item">','<span>{{text}}</span><span data-value="{{value}}" class="token-close {{no-remove}}">×</span>',"</span>"].join(""),optionTemplate:'<option selected="selected" value="{value}">{value}</option>',liTemplate:'<li class="hidden tokenize-level-item" data-value="{value}">{value}</li>',inputTemplate:'<div class="token"> <span class="tokenize-inp"> <input type="text" maxlength="{{maxlength}}" placeholder="{{placeholder}}" style="width: {{width}}px"> </span> </div>'};var h=function(m,o){if(!j(this).hasClass("tokenize-level1-item")){var n=j(this);n.closest(o.contain).find("li").removeClass("current");n.addClass("current")}};var k=j.fn.tokenize=function(m){var n=j.extend(true,{},i,m);return this.each(function(o,p){var r=j(this);var q=r.attr("data-limitCount")*1;if(r.data("init")){return true}if(isNaN(q)){q=Infinity}r.data({showAll:r.attr("data-showAll")==="false"?false:true,create:r.attr("data-create")==="false"?false:true,limitCount:q,init:true});r.append(l.inputTemplate.replace("{{maxlength}}",n.maxLength).replace("{{placeholder}}",n.placeholder).replace("{{width}}",n.maxLength*12));k.renderSelect(r,n.expand);k.setEvent(r,n);r.find("li[uled]").each(function(s,t){j(t).addClass("current "+n.remove).trigger("click")});r.find(".tokenize-level1-item").removeClass("hide")})};k.renderSelect=function(n,o){var r=n.find("select").prop("outerHTML");var p=o?"tokenize-up":"";var m=o?"":"hide";var q='<li class="tokenize-level1-item"><span class="tokenize-level1-name '+p+'">$1</span><ul class="tokenize-level2 '+m+'">';if(r.indexOf("<optgroup")===-1){r=r.replace(/<\/optgroup>/g,"</ul></li>");r=r.replace(/select/gi,"ul").replace(/option/gi,"li").replace(/value/g,"data-value");n.append(r).find("ul").addClass("tokenize-level").find("li").addClass("tokenize-level-item")}else{r=(r+"").replace(/<optgroup\s+label="(.*)".*>/g,q);r=r.replace(/<\/optgroup>/g,"</ul></li>");r=r.replace(/select/gi,"ul").replace(/option/gi,"li").replace(/value/g,"data-value");n.append(r).find("ul").eq(0).addClass("tokenize-level1").find("ul>li").addClass("tokenize-level2-item")}};k.createToken=function(r,n,s,p){var o=j(this).closest(p.contain).find("input").val("");var m=o.parent();var q=l.spanTemplate.replace("{{text}}",r).replace("{{value}}",n).replace("{{no-remove}}",s);j(q).insertBefore(m)};k.setEvent=function(m,n){if(n.readOnly===false){m.on("click.tokenize",".token-close",function(p){p.stopPropagation();var r=j(this);var o=r.closest(n.contain);var q=r.attr("data-value");var s=o.find('li[data-value="'+q+'"]');if(s.hasClass("no-remove")){return}o.find('option[value="'+q+'"]').removeAttr("selected");s.removeClass("hidden");s.closest("li").eq(0).removeClass("hide");r.parent(".token-item").remove();k.hideToken(o);n.removeCallback.call(o)});m.on("click.tokenize",".token",function(o){o.stopPropagation();j(a).trigger("click.tokenize");var p=j(this);p.find("input").focus();k.searchToken.call(p.find("input")[0],n)});m.on("keyup.tokenize","input",function(q){var o=q.keyCode;var p=g;if(o!==p.enter&&o!==p.back&&o!==p.bottom&&o!==p.top){k.searchToken.call(this,n)}});m.on("click.tokenize",".tokenize-level1-name",function(o){j(this).toggleClass("tokenize-up").next().toggleClass("hide")});m.on("keyup.tokenize",">ul,input",function(q){var o=q.keyCode;var p=g;if(o===p.enter||o===p.back){k.setToken.call(this,n)}});m.on("keyup.tokenize",function(q){var o=q.keyCode;var p=g;if(o===p.bottom||o===p.top){m.off("mouseenter.tokenize");k.turnToken.call(this,o);m.one("mousemove",">ul",function(r){m.on("mouseenter.tokenize","li",function(s){h.call(this,s,n)})})}});m.on("mouseenter.tokenize","li",function(o){h.call(this,o,n)})}else{m.find("input").attr("readonly","readonly")}m.on("click.tokenize","li",function(o){if(!j(this).hasClass("tokenize-level1-item")){k.setToken.call(this,n)}else{o.stopPropagation()}})};k.searchToken=function(s){var p=j(this).closest(s.contain);var n=p.find(">ul");var q=n.find("li").not(".tokenize-level1-item").removeClass("current").not(".hidden");var o=p.data("showAll");var m=j.trim(this.value);var r=0;q.each(function(u,w){var v=j(w);var t=v.text();var x=r!==0?"":"current";if((o||m!=="")&&t.indexOf(m)>-1){++r;v.removeClass("hide").addClass(x)}else{v.addClass("hide")}});s.searchCallback.call(p);if(r===0){n.addClass("hide");return}n.removeClass("hide");k.hideTitle.call(p)};k.setToken=function(p){var m=j(this).closest(p.contain);var n=m.find("li").not(".tokenize-level1-item");var s=n.filter(".current");var t;var r;var o=m.find(".token input");var v=j.trim(o.val());var u;if(!k.testCount.call(this,p)){p.overLimitCount(m);return}if(!k.testExist.call(this,p)){p.existToken(m);return}p.beforeChoice.call(m);if(s.length){s.removeClass("current").addClass("hidden");u=s.hasClass("no-remove")?"no-remove":"";k.createToken.call(this,s.text(),s.attr("data-value"),u,p);r=n.index(s);m.find("option").eq(r).attr("selected","selected")}else{var q=m.find("ul");if(m.data("create")&&q.length===1&&v){m.find("ul").append(l.liTemplate.replace(/\{value\}/g,v));k.createToken.call(this,v,v,"",p);m.find("select").append(l.optionTemplate.replace(/\{value\}/g,v))}}k.hideToken(m);p.choiceCallback.call(m,s)};k.turnToken=function(r){var s=j(this);var o=s.find(">ul");var n=s.find("li").not(".tokenize-level1-item");var u=n.height();var t=n.filter(":visible");var q=t.filter(".current");var p=t.index(q);var m=t.length;if(m){if(r===40){p=(p+1)%m}else{if(p!==0){p=--p}else{p=--m}}q.removeClass("current");t.eq(p).addClass("current");o.scrollTop(p*u)}};k.hideToken=function(m){j(a).on("click.tokenize",function(n){k.hideToken(j(".tokenize"))});return function(n){n.find(">ul").not(".extra").addClass("hide");n.find("li").not(".tokenize-level1-item,.extra").addClass("hide")}}();k.hideTitle=function(){var m=this.find(".tokenize-level1-item");m.each(function(n,p){var o=j(p);if(o.find("li:not(.hidden):not(.hide)").length>0){o.removeClass("hide")}else{o.addClass("hide")}})};k.testCount=function(p){var m=j(this).closest(p.contain);var o=m.data("limitCount");var n=m.find(".token-item").length;if(o!==Infinity){if(n>=o){return false}}return true};k.testExist=function(p){var o=j(this).closest(p.contain);var q=j.trim(o.find(".token input").val());var n=o.find(".token-item");var m=true;n.each(function(s,t){var r=j(t).find("span").eq(0);if(r.text()===q){m=false;return}});return m};j.fn.IUI({tokenize:k})})(jQuery);d.extend({dialog:function(q){var i=IUI_UTILS.scrollBarWidth;var k=d("body");var n=a.all&&!c.atob?0:200;var j={title:"",content:"",confirmText:"确定",cancelText:"取消",closeBtn:false,shadow:true,type:"confirm",status:"default",keyboard:true,before:function(){},confirm:function(){},cancel:function(){}};var h=d.extend({},j,q);var g=l();var p={showDialog:function(){o(g)},hideDialog:function(){m(g)},target:g};if(!d.dialogBackdrop){d.dialogBackdrop=d('<div class="IUI-dialog-backdrop"></div>');k.append(d.dialogBackdrop)}if(h.shadow){k.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-container",function(r){r.preventDefault();m(g)})}k.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-main",function(r){r.stopPropagation()});g.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-confirm",function(r){if(h.type==="dialog"){if(h.cancel.call(this,p)===false){return false}m(g);return false}if(h.confirm.call(this,p)===false){return false}});g.on("touchstart.iui-dialog click.iui-dialog",".IUI-dialog-cancel,.IUI-dialog-close",function(r){if(h.cancel.call(this,p)===false){return false}m(g)});if(h.keyboard){d(a).off("keyup.iui-dialog").on("keyup.iui-dialog",function(r){if(r.keyCode===27){g.find(".IUI-dialog-cancel,.IUI-dialog-close").trigger("click.iui-dialog")}if(r.keyCode===13){g.find(".IUI-dialog-confirm").trigger("click.iui-dialog")}})}function o(s){var t=a.documentElement.clientHeight;var r=a.body.style.msTouchAction===f;s.find(".IUI-dialog-main").off(IUI_UTILS.animateEnd);d.dialogBackdrop.off(IUI_UTILS.transitionEnd);if(d("body").height()>t&r){k.css({"border-right":i+"px transparent solid",overflow:"hidden"})}s.removeClass("hide");d.dialogBackdrop.attr("style","opacity: 1;visibility: visible;");s.find(".IUI-dialog-main").addClass("dialog-opening");IUI_UTILS.animateEndShim(s.find(".IUI-dialog-main"),function(u){s.find(".IUI-dialog-main").removeClass("dialog-opening")})}function m(r){d([k,r]).off("touchstart.iui-dialog click.iui-dialog");r.addClass("dialog-closing");d.dialogBackdrop.removeAttr("style");IUI_UTILS.transitionEndShim(d.dialogBackdrop,function(s){r.remove();k.removeAttr("style")})}function l(){var u=h.type==="confirm";var x='<span class="IUI-dialog-close"></span>';var t='<a href="javascript:;" class="IUI-dialog-confirm">'+h.confirmText+"</a>";var w='<a href="javascript:;" class="IUI-dialog-cancel">'+h.cancelText+"</a>";var z='<div class="IUI-dialog-header">'+(h.title||"")+(h.closeBtn?x:"")+"</div>";var v='<div class="IUI-dialog-content">'+(h.content||"")+"</div>";var s='<div class="IUI-dialog-footer">'+(u?(t+w):t.replace("IUI-dialog-confirm","IUI-dialog-cancel"))+"</div>";var r=z+v+s;var y=d('<div class="IUI-dialog-container hide"><div class="IUI-dialog-main '+h.status+'">'+r+"</div></div>");k[0].appendChild(y[0]);return y}if(h.before.call(this,p)===false){return false}o(g)}});(function(){var h='<div class="IUI-popover-container">{{header}}{{content}}</div>';var i={handle:"[data-popover]",container:"body",offsetX:0,offsetY:10,compiler:null,header:""};function g(j){this.$selector=d(j.handle);this.$container=d(j.container);this.config=j;this.containerPos=d(j.container)[0].getBoundingClientRect();this.screenWidth=d(a).width();this.screenHeight=d(a).height();this.init()}g.prototype.init=function(){var j=this;j.$container.on("click.IUI-popover",j.config.handle,function(k){var l=d(this);var m=l.data("popoverid")?(".popover-"+l.data("popoverid")):".popover";if(l.hasClass("popover-active")){j.hide(l.removeClass("popover-active").data("template"));return false}else{l.addClass("popover-active")}d.pub("before"+m,[j,l]);j.show(l);d.pub("after"+m,[j,l]);k.stopPropagation()});d("body").on("click.IUI-popover",function(k){var l=d(this);if((d(k.target).closest(".IUI-popover-container").length===0)){l.trigger("hide.popover",[j]);j.hide()}})};g.prototype.getEmitterPos=function(j){var r=this;var l=r.config;var p=j;var q=p[0].getBoundingClientRect();var o=q.left;var n=q.top;var k=p.outerWidth()/2;var m=p.outerHeight();return[o,n,k,m]};g.prototype.fillContent=function(j){var r=this;var l=r.config;var n=j;var m=n.attr("data-ppHeader")||l.header;var o=n.attr("data-popover");var p=o.indexOf("##")===0;var k=p?o.slice(2,o.length):d(o);var q=h.replace("{{header}}",m?'<div class="popover-header">'+m+"</div>":"");if(!p&&k.data("compiler")&&l.compiler){q=q.replace("{{content}}",l.compiler(k.html(),n))}else{q=q.replace("{{content}}",p?'<div class="popover-content">'+k+"</div>":k.html())}return q};g.prototype.excePosition=function(j,u){var v=this;var o=v.containerPos.left;var l=v.containerPos.top;var k=v.screenWidth;var m=v.screenHeight+v.$container.scrollTop();var n=v.getEmitterPos(j);var s=u;var r=s.outerWidth()/2;var q=s.outerHeight()+30;var t=["center","bottom"];if(n[1]<q){t[1]="bottom"}if(m-n[1]-n[3]<q){t[1]="top"}if(r+n[2]/2+n[0]>k){t[0]="right"}if(n[0]<r){t[0]="left"}s.addClass(t.join(" "));var p=[];if(t[0]==="left"){p[0]=0}else{if(t[0]==="right"){p[0]=n[0]-o-s.outerWidth()+n[2]*2}else{p[0]=n[0]-o-r+n[2]}}if(t[1]==="top"){p[1]=n[1]+v.$container.scrollTop()-l-q}else{p[1]=n[1]+v.$container.scrollTop()+n[3]-l}return p};g.prototype.show=function(p){var k=this;var m=k.config;var n=p;var o=k.fillContent(n);var l=d(o);n.data("template",l);k.$container.data("popoverInit",k.$container.css("position")).css({position:"relative"});l.addClass("popover-show").appendTo(m.container);var j=k.excePosition(p,l);l.css({left:j[0]+m.offsetX,top:j[1]+m.offsetY,}).addClass("popover-in")};g.prototype.hide=function(l){var k=this;var j=l||d(".IUI-popover-container");var m=k.$container;if(!l){d("[data-popover]").removeClass("popover-active")}m.css("position",m.data("popoverInit"));IUI_UTILS.transitionEndShim(j.removeClass("popover-in"),function(){j.remove()})};d.extend({popover:function(j){return new g(d.extend({},i,j))}})}())}(jQuery,window,document,undefined));